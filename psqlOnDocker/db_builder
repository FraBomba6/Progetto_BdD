#!/bin/bash

DB_CREATION=create_db.sql
MOCKUP_DATA=./sql
DATABASE=ufficioacquisti
export PGPASSWORD="bdd2021"

echo; 

tput bold; echo -en "\rCreating db"; tput sgr0
(psql -U postgres -h localhost -p 15000 -c "drop database if exists $DATABASE") > /dev/null 2>&1
(createdb -U postgres -h localhost -p 15000 $DATABASE) > /dev/null

tput bold; echo -en "\rBuilding database"; tput sgr0
(psql -U postgres -h localhost -p 15000 -d $DATABASE -f $DB_CREATION) > /dev/null

tput bold; echo -en "\rMockup Data Insertion\n\n"; tput sgr0

echo -en "\tðŸ•› Responsabile"
(psql -U postgres -h localhost -p 15000 -d $DATABASE -f "$MOCKUP_DATA/Responsabile.sql") > /dev/null
echo -e "\r\tâœ…"
echo -en "\tðŸ•› Dipartimento"
(psql -U postgres -h localhost -p 15000 -d $DATABASE -f "$MOCKUP_DATA/Dipartimento.sql") > /dev/null
echo -e "\r\tâœ…"
echo -en "\tðŸ•› Articolo"
(psql -U postgres -h localhost -p 15000 -d $DATABASE -f "$MOCKUP_DATA/Articolo.sql") > /dev/null
echo -e "\r\tâœ…"
echo -en "\tðŸ•› Fornitore"
(psql -U postgres -h localhost -p 15000 -d $DATABASE -f "$MOCKUP_DATA/Fornitore.sql") > /dev/null
echo -e "\r\tâœ…"
echo -en "\tðŸ•› RecapitoTelefonico"
(psql -U postgres -h localhost -p 15000 -d $DATABASE -f "$MOCKUP_DATA/RecapitoTelefonico.sql") > /dev/null
echo -e "\r\tâœ…"
echo -en "\tðŸ•› Fornisce"
(psql -U postgres -h localhost -p 15000 -d $DATABASE -f "$MOCKUP_DATA/Fornisce.sql") > /dev/null
echo -e "\r\tâœ…"
echo -en "\tðŸ•› RichiestaAcquisto"
(psql -U postgres -h localhost -p 15000 -d $DATABASE -f "$MOCKUP_DATA/RichiestaAcquisto.sql") > /dev/null
echo -e "\r\tâœ…"
echo -en "\tðŸ•› Ordine"
(psql -U postgres -h localhost -p 15000 -d $DATABASE -f "$MOCKUP_DATA/Ordine.sql") > /dev/null
echo -e "\r\tâœ…"
echo -en "\tðŸ•› Include"
(psql -U postgres -h localhost -p 15000 -d $DATABASE -f "$MOCKUP_DATA/Include.sql") > /dev/null
echo -e "\r\tâœ…"

echo; echo;

echo -e "Bye\n"
